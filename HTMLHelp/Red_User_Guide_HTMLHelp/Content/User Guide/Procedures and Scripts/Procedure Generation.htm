<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../" data-mc-toc-path="Procedures and Scripts" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../Skins/Favicons/browserconfig.xml" />
        <link rel="icon" sizes="16x16" href="../../../Skins/Favicons/favicon-16x16.png" /><title>Procedure Generation</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/wmd-onlinehelp-style.css" rel="stylesheet" type="text/css" />
        <link href="../../Resources/tablestyles/note.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link href="../../Resources/tablestyles/tip.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link rel="icon" sizes="16x16" href="../../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="nocontent">
            <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
            </div>
        </div>
        <div role="main" id="mc-main-content">
            <h2 class="Heading2">Procedure Generation</h2>
            <p class="BodyText"><span class="mc-variable WS_Branding.CompanyShortName variable">WhereScape</span> <span class="mc-variable WS_Branding.Product variable">RED</span> generates template procedures to assist in the various phases of the data warehouse build process. A procedure is generated by selecting the <b>(Build Procedure...) </b>option from a drop-down list field in a table's Properties window to configure the update, initial build, or post load procedures. </p>
            <p class="BodyText">For <b>Load</b> tables, a post load procedure can be generated by selecting the option above. This post load procedure is designed to assist in the management of file loads where a trigger file has been used.&#160; </p>
            <p class="BodyText">Post load procedures can either be manually generated from a <span class="mc-variable WS_Branding.Product variable">RED</span> provided procedure outline or generated leveraging a <span class="mc-variable WS_Branding.Product variable">RED</span> template—refer to <a href="../Table Properties/Rebuilding Update Procedures.htm">Rebuilding Update Procedures</a> for details. </p>
            <table style="width: 100%;margin-left: 0;margin-right: auto;mc-table-style: url('../../Resources/tablestyles/note.css');" class="TableStyle-note" cellspacing="0">
                <col class="TableStyle-note-Column-Column1" />
                <thead>
                    <tr class="TableStyle-note-Head-Header1">
                        <th class="TableStyle-note-HeadD-Column1-Header1">Note</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="TableStyle-note-Body-Body1">
                        <td class="TableStyle-note-BodyA-Column1-Body1" role="rowheader"> For custom database targets, the option to use Post Load Scripts is provided, as an alternative to post load procedure. Post load scripts can  be generated using a <span class="mc-variable WS_Branding.Product variable">RED</span> template—refer to <a href="../Table Properties/Rebuilding Update Procedures.htm">Rebuilding Update Procedures</a> for details</td>
                    </tr>
                </tbody>
            </table>
            <p class="BodyText">&#160;</p>
            <p class="BodyText">For <b>Dimension</b>, <b>Stage</b>, <b>Fact</b> and <b>Aggregate</b> tables, an Update or Initial Build procedure can be generated by selecting from the corresponding procedure drop-down list field in the table's Properties.</p>
            <p class="BodyText" data-mc-conditions="Outputs.Only for RED User Guide">When an 'Update' procedure generation is selected for a Dimension, a <b>get_key</b> <b>function</b> is also automatically created.</p>
            <p class="BodyText" data-mc-conditions="Outputs.Only for RED User Guide">If a new procedure is created from scratch (i.e. not auto generated), then an outline of the syntax required by the <span class="mc-variable WS_Branding.CompanyShortName variable">WhereScape</span> scheduler can be generated by selecting the <b>Tools &gt; Create Procedure Outline</b> menu option in the procedure editor.</p>
            <h3>Wrapper procedures</h3>
            <p class="BodyText">In some cases, multiple procedures will be required to update a table. In such cases, it is best to create a top level procedure that is seen by the scheduler as the 'Update' procedure. This procedure can in turn, call other procedures.</p>
            <p class="SubHeading1"><b>Example</b>
            </p>
            <p class="BodyText">We may have a fact table that is updated from multiple stage tables. This Oracle wrapper procedure calls two child procedures, one for each stage table that is to update the fact table. A status is reported back to the audit trail for each stage and an overall status ascertained for the fact table update.<br />The Oracle wrapper procedure may look as follows:</p>
            <p class="BodyText">
                <img src="../../Images/UserGuide_Images/Procs and Scrps/Procedure Generation.png" />
            </p>
            <p class="BodyText">
                <img src="../../Images/UserGuide_Images/Procs and Scrps/Procedure Generation_2.png" />
            </p>
            <h3>Procedure Placeholders</h3>
            <p class="BodyText">Procedure placeholders can help in moving procedures between environments without the necessity of regenerating those same procedures. In <span class="mc-variable WS_Branding.Product variable">RED</span>, the purpose of these placeholders is to automatically substitute the corresponding strings, which is needed for a specific environment. </p>
            <p class="BodyText">The following procedure placeholders described below can be found in the update_xxxx_xxxx procedure.</p>
            <p class="BodyText"><b>[TABLEOWNER]</b> is used as a placeholder to replace the schema name defined in the connection or target.</p>
            <p class="BodyText">For targets, the <b>[TABLEOWNER]</b> placeholder is derived from the Target Location Database/Schema in the connection. The target can be changed in the table's <b>Storage</b> screen, on the <b>Target Location</b> drop-down list. For more information about&#160;Target Location Database/Schema in connections and table storage screens, refer to <a href="../Connections/Database.htm" data-mc-conditions="Outputs.Only for RED User Guide">Connections - Database</a>, <a href="../Connections/ODBC.htm">Connections - ODBC</a> and <a href="../Table Properties/Storage.htm">Table Storage Properties</a> for details.<br />When moving tables between environments, the <b>[TABLEOWNER]</b> placeholder is determined by the individual connection of the target environment. </p>
            <p class="SubHeading1"><b>Example </b>
            </p>
            <p class="BodyText">During the compilation process of the procedure, [TABLEOWNER].[table_name] is replaced with PRODUSER.tablename, if the table owner is PRODUSER in the destination environment.</p>
            <p class="BodyText">
                <img src="../../Images/UserGuide_Images/Procs and Scrps/Procedure Generation_3.png" />
            </p>
            <table style="width: 100%;margin-left: 0;margin-right: auto;mc-table-style: url('../../Resources/tablestyles/tip.css');" class="TableStyle-tip" cellspacing="0">
                <col class="TableStyle-tip-Column-Column1" />
                <thead>
                    <tr class="TableStyle-tip-Head-Header1">
                        <th class="TableStyle-tip-HeadD-Column1-Header1">Tip</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="TableStyle-tip-Body-Body1">
                        <td class="TableStyle-tip-BodyA-Column1-Body1"><b>WhereScape RED Tip: dim_date</b>
                            <br />The TABLEOWNER placeholder is especially useful in update procedures when the related table is moved to a different schema or environment. For example, when moving dim_date to other schemas, [TABLEOWNER] will be replaced with the schema of the table when the procedure is compiled.<br />To do this, prefix the table name in the procedure to [TABLEOWNER].[table_name] (e.g. [TABLEOWNER].[dim_date]). It is then only necessary to do a recompile, instead of rebuilding or regenerating the procedure.</td>
                    </tr>
                </tbody>
            </table>
            <p id="linespace">&#160;</p>
            <table style="width: 100%;margin-left: 0;margin-right: auto;mc-table-style: url('../../Resources/tablestyles/note.css');" class="TableStyle-note" cellspacing="0" data-mc-conditions="Outputs.Only for RED User Guide">
                <col class="TableStyle-note-Column-Column1" />
                <thead>
                    <tr class="TableStyle-note-Head-Header1">
                        <th class="TableStyle-note-HeadD-Column1-Header1">Note</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="TableStyle-note-Body-Body1">
                        <td class="TableStyle-note-BodyA-Column1-Body1" role="rowheader">For Oracle and DB2 databases [TABLEOWNER] has already been added to the sample dim_date update procedures.</td>
                    </tr>
                </tbody>
            </table>
            <p class="BodyText" data-mc-conditions="Outputs.Only for RED User Guide"><b>[FUNCTIONOWNER] </b>is used as a placeholder for <b>Greenplum</b> databases to enable the creation of procedures in different targets without the need of procedure regeneration.</p>
            <p class="BodyText">
                <img src="../../Images/UserGuide_Images/Procs and Scrps/Procedure Generation_4.png" data-mc-conditions="Outputs.Only for RED User Guide" />
            </p>
            <p class="BodyText" data-mc-conditions="Outputs.Only for RED User Guide"><b>[SEQUENCE.tablename]</b> is used as a placeholder for <b>Oracle </b>and <b>Greenplum</b> database sequences where the Sequence name can be defined for artificial keys in a table's storage screen. </p>
            <p class="BodyText" data-mc-conditions="Outputs.Only for RED User Guide">This placeholder can be edited in the table's <b>Storage</b> screen, on the <b>Artificial Key Sequence Name</b> field, if that table contains an artificial key. For more information about replacing the sequence name in Oracle, refer to <a href="../Table Properties/Table Storage Screen Oracle.htm">Table Storage Screen - Oracle</a> for details.</p>
            <p class="BodyText" data-mc-conditions="Outputs.Only for RED User Guide">
                <img src="../../Images/UserGuide_Images/Procs and Scrps/Procedure Generation_5.png" />
            </p>
            <p class="BodyText" data-mc-conditions="Outputs.Only for RED User Guide"><b>[SCHEMA.tablename]</b> is used as a placeholder for <b>Oracle </b>database schemas in partitioned fact tables, to facilitate moving partitioned fact table procedures between environments without having to regenerate the procedures.</p>
            <p class="BodyText">
                <img src="../../Images/UserGuide_Images/Procs and Scrps/Procedure Generation_6.png" data-mc-conditions="Outputs.Only for RED User Guide" />
            </p>
        </div>
    </body>
</html>