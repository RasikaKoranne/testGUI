<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../" data-mc-toc-path="Backing Up and Restoring Metadata" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../Skins/Favicons/browserconfig.xml" />
        <link rel="icon" sizes="16x16" href="../../../Skins/Favicons/favicon-16x16.png" /><title>Restoring DB Backups</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/wmd-onlinehelp-style.css" rel="stylesheet" type="text/css" />
        <link href="../../Resources/tablestyles/note.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link rel="icon" sizes="16x16" href="../../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="nocontent">
            <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
            </div>
        </div>
        <div role="main" id="mc-main-content">
            <h2 class="Heading2">Restoring DB Backups</h2>
            <p class="BodyText"><span class="mc-variable WS_Branding.CompanyShortName variable">WhereScape</span> <span class="mc-variable WS_Branding.Product variable">RED</span> metadata can be restored from a prior backup. For Oracle data warehouses, the restore can take place either from UNIX or through the <span class="mc-variable WS_Branding.CompanyShortName variable">WhereScape</span> <span class="mc-variable WS_Branding.Product variable">RED</span> tool. The same set of files as defined in the backup section are used for both restores and can be moved between the Windows and UNIX environments. For SQL Server data warehouses, the restore must take place in a Windows environment either through the <span class="mc-variable WS_Branding.CompanyShortName variable">WhereScape</span> <span class="mc-variable WS_Branding.Product variable">RED</span> tool or manually.</p>
            <table style="width: 100%;margin-left: 0;margin-right: auto;mc-table-style: url('../../Resources/tablestyles/note.css');" class="TableStyle-note" cellspacing="0">
                <col class="TableStyle-note-Column-Column1" />
                <thead>
                    <tr class="TableStyle-note-Head-Header1">
                        <th class="TableStyle-note-HeadD-Column1-Header1">Note</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="TableStyle-note-Body-Body1">
                        <td class="TableStyle-note-BodyA-Column1-Body1" role="rowheader">If transferring the export files via ftp, ensure that the file.exp and .bcp files are transferred in binary mode and that the other files are transferred in ASCII mode.</td>
                    </tr>
                </tbody>
            </table>
            <h3>Restoring metadata</h3>
            <p class="BodyText">A backup of a metadata repository can be restored over the top of an existing repository. This action replaces the existing repository in its entirety. The restore of repositories is covered in an earlier section, but its uses in the promoting of code are discussed here. This restore process does not affect any existing database tables or any compiled procedures, so it can be used as a means of updating a metadata repository, albeit by replacing that repository. It is often a good method to choose when first establishing a new repository. For example, if we have a development repository and want to create a production environment the steps may be:</p>
            <ol>
                <li value="1">Backup the development repository, using either the UNIX or Windows repository backup. Refer to the previous sections.</li>
                <li value="2">Create a new repository using the <b>Setup Administrator</b> utility.</li>
                <li value="3">Log on to the newly created repository.</li>
                <li value="4">Restore the backup of the development repository into the new repository. For Oracle this requires the database privilege 'imp_full_database', or the dba role.</li>
                <li value="5">Modify any connections, set any default values, alter any table sizes or extents.</li>
                <li value="6">Create the tables.</li>
                <li value="7">Compile all procedures.</li>
            </ol>
            <h4>Oracle Windows Restore</h4>
            <p class="BodyText">Select the menu option <b>Backup/Restore Metadata (from Oracle Export)</b> to begin the restore process.</p>
            <p class="BodyText">A dialog box will appear. The word <b>RESTORE</b> needs to be entered along with the <b>User Name</b> and <b>Password</b> where the metadata is to be restored to. The <b>User Name</b> does not have to be that of the current metadata repository, but it must be a valid repository. If a restore is being performed to a repository that differs from that of the backup then the 'imp_full_database' database privilege may be required.&#160; </p>
            <p class="BodyText">
                <img src="../../Images/UserGuide_Images/Backing Up and Restoring Metadata/Oracle Windows Restore.png" />
            </p>
            <p class="BodyText">Once the <b>OK</b> button is clicked, a new dialog box will appear asking for a selection of the export file. Browse to the directory where the export is located and select the export file. Once the export file is selected, the import will begin. A dialog box will appear to show the results of the import.</p>
            <h4>Oracle UNIX restore</h4>
            <p class="BodyText">The UNIX restore is actioned via the meta_restore_010.sh shell script. This script expects the export file to be located in the wsl/export directory, so it may need to be un compressed and moved to this directory if not already present.</p>
            <p class="BodyText">Execute the meta_restore_010.sh shell script. You will be prompted to enter the backup file name. Once successfully entered a username and password to be restored into are requested and the restore commences.&#160; </p>
            <h4>SQL Server Windows Restore</h4>
            <p class="BodyText">Select the menu option <b>Backup/Restore the metadata (from Sql server bcp)</b> to begin the restore process.</p>
            <p class="BodyText">A dialog box will appear. The word <b>RESTORE</b> needs to be entered along with the connection, <b>User Name</b> and <b>Password</b> where the metadata is to be restored to. The metadata will always be restored to the dbo schema. The connection does not have to be that of the current metadata repository, but it must be a valid repository.</p>
            <p class="BodyText">
                <img src="../../Images/UserGuide_Images/Backing Up and Restoring Metadata/SQL Server Windows Restore.png">
                </img>
            </p>
            <p class="BodyText">Once the <b>OK</b> button is clicked, a new dialog box will appear asking for a selection of the export directory. Browse to the contents of the directory where the export is located. Once the export directory is selected, the import will begin. A dialog box will appear to show the results of the import.</p>
            <h4>DB2 Windows Restore</h4>
            <p class="BodyText">Select the menu option <b>Backup/Restore metadata (from DB2 export)</b> to begin the restore process.</p>
            <p class="BodyText">A dialog box will appear. The word <b>RESTORE</b> needs to be entered with the <b>User Name</b> and <b>Password</b> for DB2. If using a trusted connection to DB2, the username and password should be left blank. The metadata schema should also be entered. The schema does not have to be that of the current metadata repository, but it must contain a valid repository.</p>
            <p class="BodyText">
                <img src="../../Images/UserGuide_Images/Backing Up and Restoring Metadata/DB2 Windows Restore.png">
                </img>
            </p>
            <p class="BodyText">Once the <b>OK</b> button is clicked, a new dialog box will appear asking for a selection of the export file. Browse to the directory where the export is located and select the export file. Once the export file is selected, the import will begin. A dialog box will appear to show the results of the import.</p>
        </div>
    </body>
</html>