<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../" data-mc-toc-path="EDW 3NF Tables" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../Skins/Favicons/browserconfig.xml" />
        <link rel="icon" sizes="16x16" href="../../../Skins/Favicons/favicon-16x16.png" /><title>EDW 3NF Table Artificial Keys</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/wmd-onlinehelp-style.css" rel="stylesheet" type="text/css" />
        <link href="../../Resources/tablestyles/tablestyle.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link rel="icon" sizes="16x16" href="../../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="nocontent">
            <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
            </div>
        </div>
        <div role="main" id="mc-main-content">
            <h2 class="Heading2">EDW 3NF Table Artificial Keys</h2>
            <p class="BodyText">By default, EDW 3NF tables in <span class="mc-variable WS_Branding.CompanyShortName variable">WhereScape</span> <span class="mc-variable WS_Branding.Product variable">RED</span> do not have an artificial (surrogate) key. Artificial keys can be added manually. </p>
            <p class="BodyText">The quickest way to do this is to add an extra column to the EDW 3NF table by using either <b>Add Column</b> or <b>Copy Column</b>.</p>
            <p>There is also an option for artificial keys to be automatically added to EDW 3NF tables through an option in the <b>Tools</b> menu (see below - Allowing for non identity surrogate keys on EDW 3NF tables).</p>
            <ol>
                <li value="1">Right click a column in the middle pane and select either <b>Add Column</b> or <b>Duplicate Column</b> from the context menu.</li>
                <li value="2">Edit the properties of the new column to have the correct name and order, source table and column, data type, key type and flags as below:<ul><li>The <b>Column Name</b> and <b>Source Column</b> must be the same.</li><li>The <b>Source Table</b> must be empty.</li><li>The <b>Data Type</b> must be integer.</li><li>The <b>Key Type</b> must be 0.</li></ul></li>
                <li value="3">Only the <b>Numeric</b> and <b>Artificial Key</b> flags must be set.<br />The following example shows a manually added artificial key column:<br /><br /><img src="../../Images/Teradata_images/EDW 3NF/norm_art_key.png" /><p>The artificial key for an EDW 3NF table is set via an identity column. This artificial key normally, and by default, starts at one and progresses as far as is required.</p><p>A <span class="mc-variable WS_Branding.CompanyShortName variable">WhereScape</span> standard for the creation of special rows in the EDW 3NF tables is as follows:</p><table class="TableStyle-tablestyle" style="margin-left: 0;margin-right: auto;width: 100%;mc-table-style: url('../../Resources/tablestyles/tablestyle.css');" cellspacing="0"><col class="TableStyle-tablestyle-Column-Column1" /><col class="TableStyle-tablestyle-Column-Column2" /><thead><tr class="TableStyle-tablestyle-Head-Header1"><th class="TableStyle-tablestyle-HeadE-Column1-Header1">
                       Key value
                    </th><th class="TableStyle-tablestyle-HeadD-Column2-Header1">
                       Usage
                    </th></tr></thead><tbody><tr class="TableStyle-tablestyle-Body-Body1"><td class="TableStyle-tablestyle-BodyH-Column1-Body1">
                       1 upwards
                    </td><td class="TableStyle-tablestyle-BodyG-Column2-Body1">
                       The standard artificial keys are numbered from 1 upwards, with a new number assigned for each distinct EDW 3NF table record.
                    </td></tr><tr class="TableStyle-tablestyle-Body-Body1"><td class="TableStyle-tablestyle-BodyH-Column1-Body1">
                     0
                    </td><td class="TableStyle-tablestyle-BodyG-Column2-Body1">
                        Used as a join to the EDW 3NF table when no valid join existed. It is the convention in the <span class="mc-variable WS_Branding.CompanyShortName variable">WhereScape</span> generated code that any EDW 3NF table business key that either does not exist or does not match is assigned to key 0.
                    </td></tr><tr class="TableStyle-tablestyle-Body-Body1"><td class="TableStyle-tablestyle-BodyH-Column1-Body1">
                        -1 through -9
                    </td><td class="TableStyle-tablestyle-BodyG-Column2-Body1">
                       Used for special cases. The most common being where an EDW 3NF table is not appropriate for the record. A new key is used rather than 0 as we want to distinguish between records that are invalid and not appropriate.
                    </td></tr><tr class="TableStyle-tablestyle-Body-Body1"><td class="TableStyle-tablestyle-BodyB-Column1-Body1">
                        -10 backward
                    </td><td class="TableStyle-tablestyle-BodyA-Column2-Body1">
                        Pseudo records. In many cases, we have to deal with different granularities in our data. For example, we may have a table that contains actual sales at a product SKU level and budget information at a product group level. The product table only contains SKU based information. To be able to map the budget records to the same table, we need to create these pseudo keys that relate to product groups. The values -10 and backwards are normally used for such keys.
                    </td></tr></tbody></table><h3>Artificial keys set via a non identity column:</h3><p><b>EDW 3NF</b> Tables can have non identity columns as surrogate keys.</p><p>The generation of the update procedure will automatically add logic to the code which will associate a sequential number to the artificial key when a new row is inserted into the EDW 3NF table.</p><p>The order of these sequential numbers is determined by the business key of the source table. The value of the first newly inserted artificial key will be the value of the highest artificial key in the dimension table plus 1.</p><p>This automatically generated logic can be overwritten by defining a user specific logic on the <b>Dimension Transformation</b> field on the <b>Tools&gt;Options</b> menu or in the transformation column of the artificial key.</p><p>To have an EDW 3NF table with a non identity column as a surrogate key, you can set the table Data Type to integer in the Tools&gt;Options menu.</p><p>The old logic for dimensions can be retained, if an identity column is chosen as surrogate key.</p><h3>Allowing for non identity surrogate keys on EDW 3NF tables:</h3><ul><li><b>Go to Tools&gt;Options&gt;Global Naming Conventions&gt;Global Name of Key Columns</b>.</li><li>Expand the EDW 3NF section.</li><li>Set the <b>EDW 3NF table to have a Surrogate Key auto added</b> if you want a surrogate key added by default to all EDW 3NF tables.</li><li>Set the <b>EDW 3NF Data Type</b> to be <b>integer</b> and click <b>OK</b>.</li><li>If your tables have been created previously, you will have to <b>Recreate</b> the tables after you set this option in the <b>Tools</b> menu.<p><img src="../../Images/Teradata_images/EDW 3NF/surrogkey_tools norm.png" /></p></li></ul></li>
            </ol>
            <p>&#160;</p>
        </div>
    </body>
</html>